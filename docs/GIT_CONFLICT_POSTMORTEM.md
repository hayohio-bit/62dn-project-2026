# Git 충돌 원인 분석 및 재발 방지 가이드

본 문서는 최근 발생한 온라인 Git Merge 충돌의 원인을 분석하고, 향후 유사한 문제의 재발을 방지하기 위한 팀 협업 규칙을 제안합니다.

## 1. 🚨 금번 충돌 원인 분석 (Root Cause Analysis)

이번 병합 충돌은 주로 **"파일 수정 vs 파일 삭제"**의 논리적 충돌과 **"개발 환경 설정 파일의 공유"**로 인해 발생했습니다.

### 1.1. README.md의 논리적 충돌 (Modify/Delete Conflict)
- **상황**: `jhyeon` 및 `shy` 브랜치에서는 `README.md`에 프로젝트 설명을 추가하고 디자인을 개선하는 등 **수정(Modify)** 작업을 진행했습니다.
- **원인**: 동시에 병합을 시도한 `pr/3` (또는 `jaden` 관련) 브랜치에서 `README.md` 파일의 내용을 대거 삭제하거나, 파일 자체를 없애려는 **삭제(Delete)** 이력이 포함되어 있었습니다.
- **결과**: Git은 한 쪽에서는 파일을 고치고 있는데, 다른 쪽에서는 파일을 지우려 하므로 어떤 것이 맞는 의도인지 판단할 수 없어 충돌(Conflict)을 발생시켰습니다.

### 1.2. IDE 설정 파일의 추적 (Unignored Config Files)
- **상황**: `.idea/workspace.xml` 파일이 Git 저장소에 포함되어 추적(Tracking)되고 있었습니다.
- **원인**: 이 파일은 IntelliJ IDEA의 개인별 작업 공간 설정(창 배치, 최근 파일 등)을 담고 있어, 개발자마다 내용이 다를 수밖에 없습니다.
- **결과**: 서로 다른 개발자가 각자의 환경에서 작업 후 커밋을 올리면서, 불필요한 바이너리/XML 충돌이 지속적으로 발생했습니다.

### 1.3. 히스토리 불일치
- 서로 다른 브랜치가 `main` 브랜치의 최신 상태를 제때 반영(Rebase/Merge)하지 않은 채 오랫동안 분기되어 있어, 병합 시점이 되었을 때 공통 조상(Base)을 찾기 어렵거나 꼬이는 현상이 있었습니다.

---

## 2. ✅ 해결 방법 (Resolution)

`fix-final` 브랜치를 통해 다음과 같이 문제를 해결했습니다.

1. **User.java 및 관련 코드 통합**: 기능 구현 코드는 모두 보존하며 최신 상태로 병합했습니다.
2. **README.md 복구**: 삭제를 시도한 브랜치의 변경 사항을 **무시**하고, 수정 작업을 진행한 브랜치의 내용을 채택하여 파일을 보존했습니다.
3. **설정 파일 제거**: 충돌을 유발하던 `.idea/workspace.xml` 파일을 Git 저장소에서 **삭제**했습니다. (로컬 파일은 유지되지만 Git은 더 이상 관리하지 않음)

---

## 3. 🛡️ 재발 방지 가이드 (Prevention Guidelines)

팀 전체가 아래 규칙을 따르면 충돌을 최소화할 수 있습니다.

### 3.1. .gitignore 파일 점검 및 준수
개발 도구(IDE) 설정, 빌드 결과물, OS 자동 생성 파일은 절대 Git에 올리지 않습니다.
이미 올라간 경우 `git rm --cached` 명령어로 추적을 중단해야 합니다.

**필수 제외 항목:**
- `.idea/`, `.vscode/` (IDE 설정)
- `build/`, `out/`, `target/` (빌드 결과물)
- `node_modules/` (라이브러리)
- `.DS_Store`, `Thumbs.db` (OS 파일)

### 3.2. 작업 전후 '동기화' 습관화 (Pull First)
작업을 시작하기 전과 커밋을 올리기(Push) 전에 반드시 원격 저장소의 최신 변경 사항을 가져와야 합니다.

```bash
# 작업 시작 전
git checkout main
git pull origin main

# 내 브랜치 작업 중에도 수시로 최신화
git checkout my-feature
git merge main  # 또는 git rebase main
```

### 3.3. 의미 단위의 원자적 커밋 (Atomic Commits)
- **파일 삭제**는 매우 신중해야 합니다. 리팩토링이나 코드 수정과 파일 삭제를 하나의 커밋에 섞지 마세요.
- 커밋 메시지만 봐도 어떤 작업인지 알 수 있도록 명확히 작성합니다.

### 3.4. Pull Request (PR) 활용
- `main` 브랜치에 직접 Push하는 것을 금지하고, 반드시 PR을 통해 코드 리뷰와 자동 병합 테스트를 거치도록 합니다.
- GitHub 설정에서 **Branch Protection Rule**을 켜서, 충돌이 있거나 테스트를 통과하지 못한 PR은 머지할 수 없도록 강제하는 것이 좋습니다.
