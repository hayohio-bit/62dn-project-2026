<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{layout :: layout(~{::section}, 'Animals')}">
<section>
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>πΎ μΉκµ¬λ“¤μ„ μ†κ°ν•©λ‹λ‹¤</h2>
        <div class="btn-group">
            <a th:href="@{/animals}" class="btn btn-outline-secondary" th:classappend="${status == null} ? 'active'">μ „μ²΄</a>
            <a th:href="@{/animals(status='AVAILABLE')}" class="btn btn-outline-secondary" th:classappend="${status == T(com.antigravity.animal.entity.AnimalStatus).AVAILABLE} ? 'active'">μ…μ–‘ κ°€λ¥</a>
            <a th:href="@{/animals(status='PENDING_ADOPTION')}" class="btn btn-outline-secondary" th:classappend="${status == T(com.antigravity.animal.entity.AnimalStatus).PENDING_ADOPTION} ? 'active'">μ§„ν–‰ μ¤‘</a>
        </div>
    </div>

    <div class="row row-cols-1 row-cols-md-3 g-4">
        <div class="col" th:each="animal : ${animals.content}">
            <div class="card h-100">
                <img th:src="${animal.imageUrl != null} ? ${animal.imageUrl} : 'https://via.placeholder.com/400x300?text=No+Image'" 
                     class="card-img-top" alt="Animal Image" style="height: 250px; object-fit: cover;">
                <div class="card-body">
                    <h5 class="card-title" th:text="${animal.name}">μ΄λ¦„</h5>
                    <p class="card-text">
                        <span class="badge bg-info text-dark" th:text="${animal.species}">ν’μΆ…</span>
                        <span class="badge bg-secondary" th:text="${animal.age} + 'μ‚΄'">λ‚μ΄</span>
                    </p>
                    <p class="card-text text-truncate" th:text="${animal.healthStatus}">κ±΄κ°• μƒνƒ</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="badge" 
                              th:classappend="${animal.status == T(com.antigravity.animal.entity.AnimalStatus).AVAILABLE} ? 'bg-success' : 'bg-warning'"
                              th:text="${animal.status}">μƒνƒ</span>
                        <a th:href="@{/animals/{id}(id=${animal.id})}" class="btn btn-sm btn-primary">μμ„Έν λ³΄κΈ°</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Pagination -->
    <nav class="mt-5" th:if="${animals.totalPages > 1}">
        <ul class="pagination justify-content-center">
            <li class="page-item" th:classappend="${animals.first} ? 'disabled'">
                <a class="page-link" th:href="@{/animals(page=${animals.number - 1}, status=${status})}">Previous</a>
            </li>
            <li class="page-item" th:each="page : ${#numbers.sequence(0, animals.totalPages - 1)}" th:classappend="${page == animals.number} ? 'active'">
                <a class="page-link" th:href="@{/animals(page=${page}, status=${status})}" th:text="${page + 1}">1</a>
            </li>
            <li class="page-item" th:classappend="${animals.last} ? 'disabled'">
                <a class="page-link" th:href="@{/animals(page=${animals.number + 1}, status=${status})}">Next</a>
            </li>
        </ul>
    </nav>
</section>
</html>
